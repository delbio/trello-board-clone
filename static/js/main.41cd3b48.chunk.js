(this["webpackJsonptrello-board-clone"]=this["webpackJsonptrello-board-clone"]||[]).push([[0],{101:function(n,e,t){"use strict";t.r(e);var r=t(40),o=t(103),a=t(17),i=t.n(a);function c(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function u(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?c(t,!0).forEach((function(e){Object(r.a)(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):c(t).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var l=null,d=new o.a;d.subscribe((function(n){l=n}));var s=function(n){var e={position:Object.keys(l).length,list_title:n,cards:{}};l[i()()]=e,d.next(u({},l))};var f=t(22),p=t.n(f);d.subscribe((function(n){p.a.setItem("boardData",n)})),p.a.getItem("boardData").then((function(n){null!==n?d.next(n):d.next(b)})).catch((function(n){console.log("localforage catch",n)}));var b={"5cac8c9e-f91b-438a-9e18-00cea4667ee3":{position:0,list_title:"list title 0",cards:{"90a74fbb-0bde-4d1e-b172-ddee2857d6bd":{position:0,card_content:"card content 0"},"52f8d85a-0196-46f0-96f3-5878846851dd":{position:1,card_content:"card content 1"},"d61036f5-7c1f-4563-b91f-20856f73c018":{position:2,card_content:"card content 2"}}},"e76e7044-be79-4d02-a9c7-d76cf0139470":{position:2,list_title:"list title 1",cards:{"f85672b7-3704-4f66-977d-9fbf44557c9b":{position:0,card_content:"card content 3"},"76410d16-1fd3-43b2-8350-a5758ee0c4f4":{position:1,card_content:"card content 4"}}},"860c2140-f2cd-4e9a-8b82-179137e19b1e":{position:1,list_title:"list title 2",cards:{"9afa5554-772b-4909-a6cf-9b52a8177072":{position:0,card_content:"card content 5"},"b1206375-b007-4865-b39c-9be55e79774d":{position:1,card_content:"card content 6"},"6d886884-647b-4147-b1b2-a4316c442caf":{position:2,card_content:"card content 7"}}}},g=t(0),v=t.n(g),x=t(16),h=t.n(x),m=(t(59),t(60),t(2)),O=t(4),j=t(1),E=t(7);function k(){var n=Object(m.a)(["\n  cursor: ",";\n  height: auto;\n  overflow-y: hidden;\n  margin: -4px 0;\n  padding: 4px 8px;\n  border: none;\n  resize: none;\n  border-radius: 3px;\n  width: 100%;\n  /* font-weight: 600; */\n  background: transparent;\n  &:focus {\n    background: white;\n    box-shadow: inset 0 0 0 2px #0079bf;\n    outline: 0;\n  }\n"]);return k=function(){return n},n}var y=function(n){var e=n.placeholder,t=n.editMode,r=n.onSave,o=n.updateValue,a=n.onBlur,i=Object(g.useState)(""),c=Object(O.a)(i,2),u=c[0],l=c[1],d=Object(g.useRef)(null);Object(g.useEffect)((function(){l(o)}),[o]),Object(g.useEffect)((function(){s()}),[u]),Object(g.useEffect)((function(){t&&(d.current.focus(),d.current.select())}),[t]);var s=function(){d.current.style.height="auto",d.current.style.height=d.current.scrollHeight+"px"};return v.a.createElement(w,{ref:d,value:u,onChange:function(n){l(n.target.value)},rows:1,onKeyDown:function(n){13===n.keyCode&&(n.preventDefault(),r(u),d.current.blur())},onBlur:function(){return a(u)},spellCheck:"false",editMode:t,placeholder:e})},w=j.default.textarea(k(),(function(n){return n.editMode?"text":"pointer"}));function I(){var n=Object(m.a)(["\n  background-color: #fff;\n  border-radius: 3px;\n  /* box-shadow: 0 1px 0 rgba(9, 30, 66, 0.25); */\n  box-shadow: ",";\n  margin-bottom: 8px;\n  position: relative;\n\n  /* cursor: grab; */\n  /* && {\n    cursor: pointer;\n  } */\n\n  &:active {\n    /* cursor: grabbing; */\n  }\n\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return I=function(){return n},n}function D(){var n=Object(m.a)(["\n  /* padding: 10px 8px; */\n  padding-top: 6px;\n  padding-bottom: 2px;\n  /* padding-right: 36px; */\n\n  /* & textarea {\n    TODO override things like font-weight\n  } */\n"]);return D=function(){return n},n}function S(){var n=Object(m.a)(["\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  font-family: trellicons;\n  border-radius: 3px;\n  height: 23px;\n  width: 23px;\n  line-height: 23px;\n  text-align: center;\n  &:hover {\n    background-color: rgba(9, 30, 66, 0.08);\n  }\n  visibility: hidden;\n  cursor: pointer;\n"]);return S=function(){return n},n}var _=function(n){var e=n.listId,t=n.cardId,r=n.cardData,o=Object(g.useState)(!1),a=Object(O.a)(o,2),i=a[0],c=a[1],s=function(n){!function(n,e,t){l[n].cards[e].card_content=t,d.next(u({},l))}(e,t,n),c(!1)},f=function(){c(!0)},p=function(){!function(n,e){delete l[n].cards[e],d.next(u({},l))}(e,t)};return v.a.createElement(E.b,{draggableId:t,index:r.position,disableInteractiveElementBlocking:!i},(function(n,e){return v.a.createElement(M,Object.assign({ref:n.innerRef},n.draggableProps,n.dragHandleProps,{editMode:i}),v.a.createElement(P,{onClick:f},v.a.createElement(y,{onSave:s,updateValue:r.card_content,onBlur:s,editMode:i})),v.a.createElement(C,{onClick:p},"\ue918"))}))},C=j.default.div(S()),P=j.default.div(D()),M=j.default.div(I(),(function(n){return n.editMode?"none":"0 2px 4px rgba(2, 2, 2, 0.6)"}),C);function B(){var n=Object(m.a)(["\n  padding: 8px;\n"]);return B=function(){return n},n}function R(){var n=Object(m.a)(["\n  cursor: pointer;\n  /* TODO isDraggingOver */\n  /* pointer-events: none; */\n  padding: 8px;\n  &:hover span:last-child {\n    text-decoration: underline;\n  }\n  &:hover {\n    background-color: rgba(9, 30, 66, 0.08);\n  }\n"]);return R=function(){return n},n}var T=function(n){var e=n.listId,t=Object(g.useState)(!1),r=Object(O.a)(t,2),o=r[0],a=r[1];if(!o)return v.a.createElement(H,{onClick:function(){return a(!0)}},v.a.createElement("span",{className:"trellicons"},"\ue901")," ",v.a.createElement("span",null,"Add another card"));return v.a.createElement(N,null,v.a.createElement(y,{onSave:function(n){!function(n,e){var t=l[n].cards,r={position:Object.keys(t).length,card_content:e};l[n].cards[i()()]=r,d.next(u({},l))}(e,n),a(!1)},updateValue:"",onBlur:function(){a(!1)},editMode:!0,placeholder:"Enter a title for this card\u2026"}))},H=j.default.div(R()),N=j.default.div(B());function A(){var n=Object(m.a)(["\n  padding: 10px 8px;\n  padding-right: 36px;\n\n  & textarea {\n    font-weight: 600;\n  }\n"]);return A=function(){return n},n}function V(){var n=Object(m.a)(["\n  position: relative;\n  && {\n    cursor: pointer;\n  }\n  &:hover "," {\n    visibility: visible;\n  }\n"]);return V=function(){return n},n}function L(){var n=Object(m.a)(["\n  position: absolute;\n  top: 4px;\n  right: 4px;\n  font-family: trellicons;\n  border-radius: 3px;\n  height: 32px;\n  width: 32px;\n  line-height: 32px;\n  text-align: center;\n  &:hover {\n    background-color: rgba(9, 30, 66, 0.08);\n  }\n  visibility: hidden;\n"]);return L=function(){return n},n}var U=function(n){var e=n.setDragBlocking,t=n.dragHandleProps,r=n.listId,o=n.title,a=Object(g.useState)(!1),i=Object(O.a)(a,2),c=i[0],s=i[1],f=Object(g.useState)(o),p=Object(O.a)(f,2),b=p[0],x=p[1],h=function(n){console.log("_title",n),""===n.trim()?(x(""),setTimeout((function(){return x(o)}),0)):function(n,e){l[n].list_title=e,d.next(u({},l))}(r,n),e(!1),s(!1)};return v.a.createElement(J,t,v.a.createElement(K,{onClick:function(){console.log("click"),e(!0),s(!0)}},v.a.createElement(y,{onSave:h,updateValue:b,onBlur:h,editMode:c})),v.a.createElement(z,{onClick:function(){console.log("delete click"),function(n){delete l[n],d.next(u({},l))}(r)}},"\ue918"))},z=j.default.div(L()),J=j.default.div(V(),z),K=j.default.div(A());function F(){var n=Object(m.a)(["\n  min-height: 50px;\n  /* background-color: pink; */\n\n  margin: 0 4px;\n  padding: 0 4px;\n"]);return F=function(){return n},n}function X(){var n=Object(m.a)(["\n  background-color: #ebecf0;\n  border-radius: 3px;\n"]);return X=function(){return n},n}function q(){var n=Object(m.a)(["\n  &:first-child {\n    margin-left: 8px;\n  }\n  width: 272px;\n  display: inline-block;\n  flex: 0 0 272px;\n  margin: 0 4px;\n"]);return q=function(){return n},n}var G=function(n){var e,t=n.listId,r=n.listData,o=Object.keys(r.cards).sort((e=r.cards,function(n,t){return e[n].position-e[t].position})),a=Object(g.useState)(!1),i=Object(O.a)(a,2),c=i[0],u=i[1];return v.a.createElement(E.b,{disableInteractiveElementBlocking:!c,draggableId:t,index:r.position},(function(n){return v.a.createElement(Q,Object.assign({ref:n.innerRef},n.draggableProps),v.a.createElement(W,null,v.a.createElement(U,{dragHandleProps:n.dragHandleProps,listId:t,title:r.list_title,setDragBlocking:u}),v.a.createElement(E.c,{droppableId:t},(function(n,e){return v.a.createElement(Y,{ref:n.innerRef},o.map((function(n){return v.a.createElement(_,{key:n,cardId:n,listId:t,cardData:r.cards[n]})})),n.placeholder)})),v.a.createElement(T,{listId:t})))}))},Q=j.default.div(q()),W=j.default.div(X()),Y=j.default.div(F());function Z(){var n=Object(m.a)(["\n  border-radius: 3px;\n  margin: -4px 0;\n  padding: 4px 8px;\n  border: none;\n  &:focus {\n    box-shadow: inset 0 0 0 2px #0079bf;\n    outline: 0;\n  }\n"]);return Z=function(){return n},n}function $(){var n=Object(m.a)(["\n  cursor: pointer;\n"]);return $=function(){return n},n}function nn(){var n=Object(m.a)(["\n  border-radius: 3px;\n  padding: 8px;\n  display: flex;\n  flex-direction: column;\n  background-color: ",";\n  color: #fff;\n  &:hover {\n    /* background-color: ","; */\n\n    /* alternative to ternary */\n    background-color: hsla(0, 0%, 100%, 0.32);\n    ","\n  }\n"]);return nn=function(){return n},n}function en(){var n=Object(m.a)(["\n  width: 272px;\n  flex: 0 0 272px;\n  /* instead of margin right for overflow-x scroll */\n  border-right: 8px solid transparent;\n  margin-left: 4px;\n"]);return en=function(){return n},n}var tn=function(){var n=Object(g.useState)(!1),e=Object(O.a)(n,2),t=e[0],r=e[1],o=Object(g.useState)(""),a=Object(O.a)(o,2),i=a[0],c=a[1],u=Object(g.useRef)(null);Object(g.useEffect)((function(){t&&u.current.focus()}),[t]);return v.a.createElement(rn,null,v.a.createElement(on,{compose:t},t||v.a.createElement(an,{onClick:function(){return r(!0)}},v.a.createElement("span",{className:"trellicons"},"\ue901")," ",v.a.createElement("span",null,"Add another list")),t&&v.a.createElement(cn,{ref:u,type:"text",value:i,onChange:function(n){c(n.target.value)},onKeyDown:function(n){13===n.keyCode&&(s(i),c(""),r(!1))},onBlur:function(){i.length>0&&(s(i),c("")),r(!1)},placeholder:"Enter list title..."})))},rn=j.default.div(en()),on=j.default.div(nn(),(function(n){return n.compose?"#ebecf0":"hsla(0, 0%, 100%, 0.24)"}),(function(n){return n.compose?"#ebecf0":"hsla(0, 0%, 100%, 0.32)"}),(function(n){return n.compose&&"background-color: #ebecf0;"})),an=j.default.div($()),cn=j.default.input(Z());function un(){var n=Object(m.a)(["\n  white-space: nowrap;\n  overflow-x: auto;\n  height: 100%;\n  display: flex;\n"]);return un=function(){return n},n}var ln=function(){var n=Object(g.useState)(null),e=Object(O.a)(n,2),t=e[0],r=e[1];if(Object(g.useEffect)((function(){var n=d.subscribe((function(n){return r(n)}));return function(){return n.unsubscribe()}}),[]),!t)return v.a.createElement("div",null,"loading");var o,a=Object.keys(t).sort((o=t,function(n,e){return o[n].position-o[e].position}));return v.a.createElement(E.a,{onBeforeDragStart:function(n){console.log("onBeforeDragStart"),"TEXTAREA"===document.activeElement.tagName.toUpperCase()&&(console.log("here"),document.activeElement.blur())},onDragStart:sn,onDragEnd:fn},v.a.createElement(E.c,{droppableId:"board",type:"COLUMN",direction:"horizontal"},(function(n){return v.a.createElement(dn,Object.assign({ref:n.innerRef},n.droppableProps),a.map((function(n){return v.a.createElement(G,{key:n,listId:n,listData:t[n]})})),n.placeholder,v.a.createElement(tn,null))})))},dn=j.default.div(un()),sn=function(n){},fn=function(n){if(console.log("TCL: result",n),n.destination){var e,t,r=n.source,o=n.destination;if(r.droppableId!==o.droppableId||r.index!==o.index)return"COLUMN"===n.type?(e=r.index,t=o.index,Object.values(l).forEach((function(n){n.position!==e?n.position<Math.min(e,t)||n.position>Math.max(e,t)||(e<t?n.position--:n.position++):n.position=t})),void d.next(u({},l))):void function(n,e,t){if(n.droppableId===e.droppableId){var r=l[n.droppableId].cards;Object.values(r).forEach((function(t){t.position!==n.index?t.position<Math.min(n.index,e.index)||t.position>Math.max(n.index,e.index)||(n.index<e.index?t.position--:t.position++):t.position=e.index}))}else{var o=l[n.droppableId].cards,a=l[e.droppableId].cards,i=l[n.droppableId].cards[t];Object.values(o).forEach((function(e){e.position>n.index&&e.position--})),Object.values(a).forEach((function(n){n.position>=e.index&&n.position++})),delete l[n.droppableId].cards[t],i.position=e.index,l[e.droppableId].cards[t]=i}d.next(u({},l))}(r,o,n.draggableId)}};t(100);var pn=function(){return v.a.createElement(v.a.Fragment,null,v.a.createElement(ln,null))};h.a.render(v.a.createElement(pn,null),document.getElementById("root"))},49:function(n,e,t){n.exports=t(101)},59:function(n,e,t){},60:function(n,e,t){}},[[49,1,2]]]);
//# sourceMappingURL=main.41cd3b48.chunk.js.map